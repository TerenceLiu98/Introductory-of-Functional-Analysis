\usepackage[english]{babel}
\usepackage[utf8]{inputenc}
\usepackage[OT1]{fontenc}
\usepackage{amsfonts, amsmath, amsthm, amssymb}
\usepackage{thmtools}
\usepackage{mathrsfs}
\usepackage{fontspec}
%\usepackage[math-style=ISO]{unicode-math}
%\usepackage[charter]{mathdesign}
%\DeclareFontFamily{U}{dutchcal}{\skewchar\font=45 }
%\DeclareFontShape{U}{dutchcal}{m}{n}{<-> s*[1.0] dutchcal-r}{}
%\DeclareFontShape{U}{dutchcal}{b}{n}{<-> s*[1.0] dutchcal-b}{}
%\DeclareMathAlphabet{\mathlcal}{U}{dutchcal}{m}{n}
%\SetMathAlphabet{\mathlcal}{bold}{U}{dutchcal}{b}{n}
\usepackage{graphicx}
\usepackage{ulem}
\usepackage{multicol}
\setlength{\marginparwidth}{2cm}
\allowdisplaybreaks
\usepackage{listings}
\usepackage[margin=0.8in]{geometry}
\usepackage{xeCJK}
\usepackage{color,soul}
\usepackage{xcolor}
\usepackage{enumitem}
\newcounter{countCode}
\usepackage{caption}
\usepackage{subcaption}
% force to start new page for each part and section
%\usepackage{sectsty}
%\sectionfont{\clearpage\phantomsection}

%\setlength{\parindent}{4em}
\setlength{\parskip}{0.5em}
\renewcommand{\baselinestretch}{1}

\usepackage{tikz}
\usetikzlibrary{arrows, arrows.meta}
\usetikzlibrary{calc,trees,positioning,arrows,fit,shapes,calc}
\usepackage{wrapfig}
\setlength\parindent{0pt}
\usepackage{hyperref}

\newtheoremstyle{Theorem}{}{}{\color{black}}{}{\color{black}\bfseries}{}{ }{}
\theoremstyle{Theorem}
\newtheorem{theorem}{Theorem}[section]

\newtheoremstyle{Definition}{}{}{\color{black}}{}{\color{black}\bfseries}{}{ }{}
\theoremstyle{Definition}
\newtheorem{definition}{Definition}[section]

\definecolor{amber}{rgb}{1.0, 0.75, 0.5}
\newtheoremstyle{Proposition}{}{}{\color{black}}{}{\color{black}\bfseries}{}{ }{}
\theoremstyle{Proposition}
\newtheorem{proposition}{Proposition}[definition]
\newtheorem{corollary}{Corollary}[theorem]
\newtheorem{lemma}{Lemma}[theorem]
\newtheorem{lemmad}{Lemma}[definition]
\newtheorem{remark}{Remark}[theorem]
\newtheorem{remarkd}{Remark}[definition]
\definecolor{airforceblue}{rgb}{0.36, 0.54, 0.66}
\newtheoremstyle{Example}{}{}{\color{black}}{}{\color{airforceblue}\bfseries}{}{ }{}
\theoremstyle{Example}
\newtheorem{example}{Example}[section]

\addto\captionsenglish{%
  \renewcommand{\listtheoremname}{List of Definitions}%
}

\let\oldproof\proof
\definecolor{armygreen}{rgb}{0.29, 0.45, 0.13}
\renewcommand{\proof}{\color{black}\oldproof}

\usepackage{xargs}% Use more than one optional parameter in a new commands
\usepackage{fontawesome5}
\usepackage[colorinlistoftodos, prependcaption, textwidth=0.675\marginparwidth, textsize=tiny]{todonotes}
\newcommandx{\improvement}[2][1=]{\todo[linecolor=red!50,backgroundcolor=red!20,bordercolor=red!50,#1]{#2}}

\usepackage{blindtext}
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\rightmark}
\fancyhead[R]{\thepage}
\fancyfoot[R]{\small Lecture Note of Introductory of Functional Analysis}
\renewcommand{\plainheadrulewidth}{0.4pt}

\newcommand{\R}{\mathbb{R}}
\newcommand{\Cc}{\mathbb{C}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\F}{\mathbb{F}}
\newcommand{\K}{\mathbb{K}}

%\newcommand{\to}{\rightarrow}
%\newcommand{\bf}{\textbf}
\newcommand\norm[1]{\lVert#1\rVert}
\newcommand\abs[1]{\lvert#1\lvert}
\newcommand{\tbf}{\textbf}
\newcommand{\mbf}{\mathbf}
\newcommand{\lcal}{\mathlcal}
\DeclareMathOperator{\spn}{span}
\DeclareMathOperator{\im}{im}
\DeclareMathOperator{\kernal}{kernal}

\usepackage[title]{appendix}
\usepackage[lastexercise]{exercise}
\setlength{\marginparsep}{5em} %
\renewcommand{\subQuestionNB}{\alph{subQuestion}) }
\renewcommand{\AnswerHeader}{\medskip{\textbf{\AnswerName\ %
    \ExerciseHeaderNB}\smallskip}}
\renewcommand{\ExerciseHeader}{\textbf{\quad\:\ExerciseName\;\ExerciseHeaderNB\ExerciseHeaderTitle\ExerciseHeaderOrigin} %
  \par\nopagebreak\medskip}
\setlength{\subQuestionIndent}{26pt}
\renewcounter{Exercise}[section] % Reset counter every chapter
\renewcounter{Answer}[section] %
\newcounter{Problem}[section] %